"use strict";(self.webpackChunkClientApp=self.webpackChunkClientApp||[]).push([["node_modules_azure_msal-browser_dist_controllers_NestedAppAuthController_mjs"],{86250:(O,E,i)=>{i.r(E),i.d(E,{NestedAppAuthController:()=>g});var d=i(15861),R=i(58214),C=i(27979),m=i(64441),l=i(78593),U=i(32341),w=i(88404),N=i(89092),f=i(95500),p=i(55140),h=i(15841),y=i(9082),S=i(14498),P=i(60544),v=i(17481);
/*! @azure/msal-browser v3.10.0 2024-02-17 */
/*! @azure/msal-browser v3.10.0 2024-02-17 */
const u_UserInteractionRequired="USER_INTERACTION_REQUIRED",u_UserCancel="USER_CANCEL",u_NoNetwork="NO_NETWORK",u_TransientError="TRANSIENT_ERROR",u_PersistentError="PERSISTENT_ERROR",u_Disabled="DISABLED",u_AccountUnavailable="ACCOUNT_UNAVAILABLE",u_NestedAppAuthUnavailable="NESTED_APP_AUTH_UNAVAILABLE";
/*! @azure/msal-browser v3.10.0 2024-02-17 */class B{constructor(e,t,r,o){this.clientId=e,this.clientCapabilities=t,this.crypto=r,this.logger=o}toNaaTokenRequest(e){var t;let r;r=void 0===e.extraQueryParameters?new Map:new Map(Object.entries(e.extraQueryParameters));const s=(new w.H).addClientCapabilitiesToClaims(e.claims,this.clientCapabilities);return{platformBrokerId:null===(t=e.account)||void 0===t?void 0:t.homeAccountId,clientId:this.clientId,authority:e.authority,scope:e.scopes.join(" "),correlationId:void 0!==e.correlationId?e.correlationId:this.crypto.createNewGuid(),claims:N.x.isEmptyObj(s)?void 0:s,state:e.state,authenticationScheme:e.authenticationScheme||f.hO.BEARER,extraParameters:r}}fromNaaTokenResponse(e,t,r){if(!t.token.id_token||!t.token.access_token)throw(0,p.zP)(h.PM);const o=new Date(1e3*(r+(t.token.expires_in||0))),s=y.Z_(t.token.id_token,this.crypto.base64Decode),c=this.fromNaaAccountInfo(t.account,s),a=t.token.scope||e.scope;return{authority:t.token.authority||c.environment,uniqueId:c.localAccountId,tenantId:c.tenantId,scopes:a.split(" "),account:c,idToken:t.token.id_token,idTokenClaims:s,accessToken:t.token.access_token,fromCache:!0,expiresOn:o,tokenType:e.authenticationScheme||f.hO.BEARER,correlationId:e.correlationId,extExpiresOn:o,state:e.state}}fromNaaAccountInfo(e,t){const r=t||e.idTokenClaims,o=e.localAccountId||(null==r?void 0:r.oid)||(null==r?void 0:r.sub)||"",s=e.tenantId||(null==r?void 0:r.tid)||"",c=e.homeAccountId||"".concat(o,".").concat(s),a=e.username||(null==r?void 0:r.preferred_username)||"",k=e.name||(null==r?void 0:r.name);return{homeAccountId:c,environment:e.environment,tenantId:s,username:a,localAccountId:o,name:k,idToken:e.idToken,idTokenClaims:r}}fromBridgeError(e){if(!function b(T){return void 0!==T.status}(e))return new v.l4("unknown_error","An unknown error occurred");switch(e.status){case u_UserCancel:return new p.er(h.$R);case u_NoNetwork:return new p.er(h.Mq);case u_AccountUnavailable:return new p.er(h.cX);case u_Disabled:return new p.er(h.Ls);case u_NestedAppAuthUnavailable:return new p.er(e.code||h.Ls,e.description);case u_TransientError:case u_PersistentError:return new S.n(e.code,e.description);case u_UserInteractionRequired:return new P.Yo(e.code,e.description);default:return new v.l4(e.code,e.description)}}}
/*! @azure/msal-browser v3.10.0 2024-02-17 */const I_unsupportedMethod={code:"unsupported_method",desc:"The PKCE code challenge and verifier could not be generated."};class n extends v.l4{constructor(e,t){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NestedAppAuthError"}static createUnsupportedError(){return new n(I_unsupportedMethod.code,I_unsupportedMethod.desc)}}var x=i(64076),A=i(26097);
/*! @azure/msal-browser v3.10.0 2024-02-17 */class g{constructor(e){this.operatingContext=e;const t=this.operatingContext.getBridgeProxy();if(void 0===t)throw new Error("unexpected: bridgeProxy is undefined");this.bridgeProxy=t,this.config=e.getConfig(),this.logger=this.operatingContext.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=e.isBrowserEnvironment()?new U.Q(this.logger,this.performanceClient):R.d,this.eventHandler=new x.b(this.logger,this.browserCrypto),this.nestedAppAuthAdapter=new B(this.config.auth.clientId,this.config.auth.clientCapabilities,this.browserCrypto,this.logger)}getBrowserStorage(){throw n.createUnsupportedError()}getEventHandler(){return this.eventHandler}static createController(e){return(0,d.Z)(function*(){const t=new g(e);return Promise.resolve(t)})()}initialize(){return Promise.resolve()}acquireTokenInteractive(e){var t=this;return(0,d.Z)(function*(){t.eventHandler.emitEvent(A.t.ACQUIRE_TOKEN_START,l.s_.Popup,e);const r=t.performanceClient.startMeasurement(C.Ak.AcquireTokenPopup,e.correlationId);null==r||r.add({nestedAppAuthRequest:!0});try{const o=t.nestedAppAuthAdapter.toNaaTokenRequest(e),s=m.HY(),c=yield t.bridgeProxy.getTokenInteractive(o),a=t.nestedAppAuthAdapter.fromNaaTokenResponse(o,c,s);return t.operatingContext.setActiveAccount(a.account),t.eventHandler.emitEvent(A.t.ACQUIRE_TOKEN_SUCCESS,l.s_.Popup,a),r.add({accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length}),r.end({success:!0,requestId:a.requestId}),a}catch(o){const s=t.nestedAppAuthAdapter.fromBridgeError(o);throw t.eventHandler.emitEvent(A.t.ACQUIRE_TOKEN_FAILURE,l.s_.Popup,null,o),r.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}})()}acquireTokenSilentInternal(e){var t=this;return(0,d.Z)(function*(){t.eventHandler.emitEvent(A.t.ACQUIRE_TOKEN_START,l.s_.Silent,e);const r=t.performanceClient.startMeasurement(C.Ak.SsoSilent,e.correlationId);null==r||r.increment({visibilityChangeCount:0}),null==r||r.add({nestedAppAuthRequest:!0});try{const o=t.nestedAppAuthAdapter.toNaaTokenRequest(e),s=m.HY(),c=yield t.bridgeProxy.getTokenSilent(o),a=t.nestedAppAuthAdapter.fromNaaTokenResponse(o,c,s);return t.operatingContext.setActiveAccount(a.account),t.eventHandler.emitEvent(A.t.ACQUIRE_TOKEN_SUCCESS,l.s_.Silent,a),null==r||r.add({accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length}),null==r||r.end({success:!0,requestId:a.requestId}),a}catch(o){const s=t.nestedAppAuthAdapter.fromBridgeError(o);throw t.eventHandler.emitEvent(A.t.ACQUIRE_TOKEN_FAILURE,l.s_.Silent,null,o),null==r||r.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}})()}acquireTokenPopup(e){var t=this;return(0,d.Z)(function*(){return t.acquireTokenInteractive(e)})()}acquireTokenRedirect(e){throw n.createUnsupportedError()}acquireTokenSilent(e){var t=this;return(0,d.Z)(function*(){return t.acquireTokenSilentInternal(e)})()}acquireTokenByCode(e){throw n.createUnsupportedError()}acquireTokenNative(e,t,r){throw n.createUnsupportedError()}acquireTokenByRefreshToken(e,t){throw n.createUnsupportedError()}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){throw n.createUnsupportedError()}removePerformanceCallback(e){throw n.createUnsupportedError()}enableAccountStorageEvents(){throw n.createUnsupportedError()}disableAccountStorageEvents(){throw n.createUnsupportedError()}getAccount(e){throw n.createUnsupportedError()}getAccountByHomeId(e){const t=this.operatingContext.getActiveAccount();return void 0!==t&&t.homeAccountId===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}getAccountByLocalId(e){const t=this.operatingContext.getActiveAccount();return void 0!==t&&t.localAccountId===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}getAccountByUsername(e){const t=this.operatingContext.getActiveAccount();return void 0!==t&&t.username===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}getAllAccounts(){const e=this.operatingContext.getActiveAccount();return void 0!==e?[this.nestedAppAuthAdapter.fromNaaAccountInfo(e)]:[]}handleRedirectPromise(e){throw n.createUnsupportedError()}loginPopup(e){if(void 0!==e)return this.acquireTokenInteractive(e);throw n.createUnsupportedError()}loginRedirect(e){throw n.createUnsupportedError()}logout(e){throw n.createUnsupportedError()}logoutRedirect(e){throw n.createUnsupportedError()}logoutPopup(e){throw n.createUnsupportedError()}ssoSilent(e){return this.acquireTokenSilentInternal(e)}getTokenCache(){throw n.createUnsupportedError()}getLogger(){return this.logger}setLogger(e){this.logger=e}setActiveAccount(e){this.logger.warning("nestedAppAuth does not support setActiveAccount")}getActiveAccount(){const e=this.operatingContext.getActiveAccount();return void 0!==e?this.nestedAppAuthAdapter.fromNaaAccountInfo(e):null}initializeWrapperLibrary(e,t){}setNavigationClient(e){this.logger.warning("setNavigationClient is not supported in nested app auth")}getConfiguration(){return this.config}isBrowserEnv(){return this.operatingContext.isBrowserEnvironment()}getBrowserCrypto(){return this.browserCrypto}getPerformanceClient(){throw n.createUnsupportedError()}getRedirectResponse(){throw n.createUnsupportedError()}preflightBrowserEnvironmentCheck(e,t){throw n.createUnsupportedError()}clearCache(e){return(0,d.Z)(function*(){throw n.createUnsupportedError()})()}hydrateCache(e,t){return(0,d.Z)(function*(){throw n.createUnsupportedError()})()}}}}]);