(self.webpackChunkClientApp=self.webpackChunkClientApp||[]).push([["src_modules_document-upload_document-upload_module_ts"],{39589:(f,P,s)=>{"use strict";s.r(P),s.d(P,{DocumentUploadModule:()=>F});var p=s(65879),u=s(96814);var c=s(71758),b=s.n(c),d=s(4828),h=s(36290),m=s(8670),g=s(16318);var R,x=s(96451),y=s.n(x),S=s(25769),E=s(79741);let D=((R=class{constructor(e,t){this.data=e,this.overlayRef=t,this.fileArr=[],this.progressPercentage=0,this.showProgress=!1,this.isloading=!1,this.comment="",this.validators=h.LA,this.allowedFormats=["pdf","doc","docx"]}ngOnInit(){}onFileUploadByDrag(e){this.selectedFile=e[0],this.fileArr.push(...e),this.showErrorMessage=!1,this.showProgress=!1,this.errorMessage="",this.progressPercentage=0;let t=e[0].name.split(".").pop();this.allowedFormats.some(i=>i===t)?this.selectedFile.size>4194304&&(this.showErrorMessage=!0,this.errorMessage="Uploaded file exceeds max limit"):(this.showErrorMessage=!0,this.errorMessage="Uploaded format is not supported")}onFileUploadBySelect(e){this.showErrorMessage=!1,this.errorMessage="",this.progressPercentage=0,this.showProgress=!1;let t=e.target.files[0].name.split(".").pop();this.selectedFile=e.target.files[0],this.fileArr.push(e.target.files[0]),this.allowedFormats.some(i=>i===t)?this.selectedFile.size>4194304&&(this.showErrorMessage=!0,this.errorMessage="Uploaded file exceeds max limit"):(this.showErrorMessage=!0,this.errorMessage="Uploaded format is not supported")}uploadFile(){this.isloading=!0,this.showProgress=!0;let e=setInterval(()=>{this.progressPercentage+=10,this.progressPercentage>=100&&(this.isloading=!1,clearInterval(e),this.onClose("success"))},2e3)}clearFile(){this.selectedFile=void 0,this.progressPercentage=0,this.showProgress=!1,this.showErrorMessage=!1,this.errorMessage=""}onClose(e){this.selectedFile&&100==this.progressPercentage?this.overlayRef.close({state:"success",fileName:this.selectedFile.name}):this.overlayRef.close({state:e})}}).ctorParameters=()=>[{type:void 0,decorators:[{type:p.tBr,args:[S.T]}]},{type:E.u}],R);D=function(r,e,t,i){var o,a=arguments.length,n=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,e,t,i);else for(var l=r.length-1;l>=0;l--)(o=r[l])&&(n=(a<3?o(n):a>3?o(e,t,n):o(e,t))||n);return a>3&&n&&Object.defineProperty(e,t,n),n}([(0,p.wA2)({selector:"app-file-upload",template:'<app-spinner *ngIf="isloading"></app-spinner>\r\n<div id="estimations-modal" class="c-modal" style="display: grid; align-items: center;">\r\n    <div class="c-modal__wrapper">\r\n        <div class="c-modal__header">\r\n            <h3 class="c-modal__title">File Upload</h3>\r\n            <div class="c-modal__close-button" (click)="onClose(\'cancel\')">\r\n                <i class="icon-add"></i>\r\n            </div>\r\n\r\n        </div>\r\n        <div class="c-modal__content">\r\n            <div class="c-modal__content-wrapper -content-scroll">\r\n                <div class="fil-wrapper">\r\n                    <div class="c-file-upload__wrap">\r\n                        <div id="o-file-upload" class="c-file-upload">\r\n                            <div class="c-file-upload__top-block" appDragDrop\r\n                                (filesDropped)="onFileUploadByDrag($event)">\r\n                                \x3c!-- <div class="icon-notes-tick c-file-upload__drop-img">\r\n                                </div> --\x3e\r\n                                <i class="icon-copy"></i>\r\n                                <div class="c-file-upload__drop-text-wrap">\r\n                                    <div class="c-file-upload__drop-desc">\r\n                                        You can add the files by\r\n                                    </div>\r\n                                    <div class="c-file-upload__drop-highlight">\r\n                                        Drag And Drop\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="c-file-upload__middle-block">\r\n                                Or\r\n                            </div>\r\n                            <div class="c-file-upload__bottom-block">\r\n                                <div class="c-file-upload__desc">\r\n                                    Upload file (pdf, doc, docx) from your HD of max 4 mb\r\n                                </div>\r\n                                <div class="c-file-upload__button">\r\n                                    <input class="c-file-upload__input" type="file" \r\n                                        (change)="onFileUploadBySelect($event)">\r\n                                    <div class="c-file-upload__img icon-up-arrow-o"></div>\r\n                                    <div class="c-file-upload__udesc">Browse File</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n\r\n                        <ng-container *ngIf="true && selectedFile">\r\n                            <div class="c-file-upload__name-wrap " [class.-completed]="progressPercentage==100">\r\n                                <div class="c-file-upload__fname-wrap">\r\n                                    <div class="c-file-upload__left-wrap">\r\n\r\n                                        <div class="c-file-upload__fname">\r\n                                            {{selectedFile.name}}\r\n                                        </div>\r\n                                        <ng-container *ngIf="showProgress">\r\n                                        <div class="c-file-upload__percent" id="progress-label">{{progressPercentage}}%\r\n                                        </div>\r\n                                        <div class="c-file-upload__bar">\r\n                                            <div class="c-file-upload__progress">&gt;\r\n                                                <span class="-bar" [ngStyle]="{width:progressPercentage+\'%\'}"></span>\r\n                                            </div>\r\n                                        </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                    <div class="c-file-upload__right-wrap" (click)="clearFile()">\r\n                                        <div class="icon-add"></div>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div *ngIf="showErrorMessage" style="color:red">{{errorMessage}}</div>\r\n                        </ng-container>\r\n\r\n\r\n\r\n                        <div class="c-file-upload__tatitle">\r\n                            Add a comment<span class="-mandatory">*</span>\r\n                        </div>\r\n                        <textarea class="o-textarea"  [KeyPressValidator]="validators.comment" [KeyPressType]="\'Restrict\'" [(ngModel)]="comment" placeholder="Type here..."></textarea>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="c-modal__footer">\r\n            <button class="o-btn-primary" [class.-disabled]="!(selectedFile && comment?.length) || showErrorMessage" (click)="uploadFile()">Upload</button>\r\n        </div>\r\n    </div>\r\n</div>',styles:[y()]})],D);var w,T=s(22096),A=s(178),U=s(79338);let I=((w=class{constructor(e){this.httpService=e}getDocumentList(){return this.httpService.get(A.Ml)}deleteDoc(){return(0,T.of)(!0)}}).ctorParameters=()=>[{type:U.O}],w);I=function(r,e,t,i){var o,a=arguments.length,n=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,e,t,i);else for(var l=r.length-1;l>=0;l--)(o=r[l])&&(n=(a<3?o(n):a>3?o(e,t,n):o(e,t))||n);return a>3&&n&&Object.defineProperty(e,t,n),n}([(0,p.GSi)({providedIn:"root"})],I);var C;let O=((C=class{constructor(e,t,i){this.overlay=e,this.router=t,this.documentService=i,this.isExpand=!1,this.selectedOption="All",this.selectedFilter="All",this.searchText="",this.validators=h.LA,this.filterOptions=[{name:"All",value:"All"},{name:"Name",value:"fullName"},{name:"Email ID",value:"emailId"}],this.sortColumn="",this.sortDirection="desc",this.pagination={currentPage:1,totalPages:1,tilesPerPage:10,enablePrevious:!1,enableNext:!0,startIndex:0,endIndex:4},this.enableEdit=!1,this.enterpriseId="",this.documentList=[]}ngOnInit(){this.getDocumentList(),this.enterpriseId=g.I.enterpriseId}getDocumentList(e=!0){this.documentService.getDocumentList().subscribe(t=>{this.documentList=t,this.checkPagination()})}checkPagination(){this.pagination.currentPage>=this.pagination.totalPages?(this.pagination.currentPage=this.pagination.totalPages,this.pagination.enableNext=!1,this.pagination.enablePrevious=!0):this.pagination.currentPage<this.pagination.totalPages&&this.pagination.currentPage>=1?(this.pagination.enableNext=!0,1===this.pagination.currentPage?this.pagination.enablePrevious=!1:this.pagination.enablePrevious=!0):this.pagination.currentPage<1&&(this.pagination.currentPage=1,this.checkPagination())}setPageIndicies(){if(this.pagination.startIndex=(this.pagination.currentPage-1)*this.pagination.tilesPerPage,this.pagination.totalPages>1)if(this.pagination.startIndex+this.pagination.tilesPerPage<=(this.pagination.totalPages-1)*this.pagination.tilesPerPage)this.pagination.endIndex=this.pagination.startIndex+this.pagination.tilesPerPage;else{let e=this.pagination.totalPages%this.pagination.tilesPerPage;this.pagination.endIndex=this.pagination.startIndex+e+1}else this.pagination.startIndex=0,this.pagination.endIndex=this.pagination.tilesPerPage}selectFilter(e){this.selectedOption=e.name,this.selectedFilter=e.value,this.isExpand=!1,this.searchText.length>2&&this.getDocumentList()}filterDocs(){var e,t;((null===(e=this.searchText)||void 0===e?void 0:e.length)>=3||0==(null===(t=this.searchText)||void 0===t?void 0:t.length))&&this.getDocumentList()}goToPage(e){"next"===e&&this.pagination.currentPage++,"previous"==e&&this.pagination.currentPage--,this.getDocumentList(!1)}onDeleteDoc(e,t){this.documentService.deleteDoc().subscribe(i=>{i&&this.getDocumentList()})}tooltipToggle(e,t){e&&document.getElementById(e)&&(document.getElementById(e).style.opacity="show"==t?"1":"0")}onSortColumClick(e){e==this.sortColumn?this.sortDirection="desc"==this.sortDirection?"asc":"desc":(this.sortColumn=e,this.sortDirection="IsActive"==this.sortColumn?"desc":"asc"),this.getDocumentList()}openUploadPopup(){this.overlay.open({component:D,data:{},position:"center",options:{width:600,hasBackdrop:!0,backdropClass:["visible"],preventBackdropClick:!0,panelClass:["custom-modal"]}}).afterClosed.subscribe(t=>{"success"==t.data.state&&this.getDocumentList()})}}).ctorParameters=()=>[{type:m.b},{type:d.F0},{type:I}],C);O=function(r,e,t,i){var o,a=arguments.length,n=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,e,t,i);else for(var l=r.length-1;l>=0;l--)(o=r[l])&&(n=(a<3?o(n):a>3?o(e,t,n):o(e,t))||n);return a>3&&n&&Object.defineProperty(e,t,n),n}([(0,p.wA2)({selector:"app-document-list",template:'<app-spinner *ngIf="isloading"></app-spinner>\r\n<div class="site-page site-bg auto-min-height">\r\n  <div class="container">\r\n<div class="c-wrapper">\r\n  <h2 class="c-page-title">Document <span class="-revision">Upload</span></h2>\r\n  <div class="c-templates-details">\r\n    <div class="c-templates-details__search-wrap">\r\n      <div class="c-search-filter">\r\n        <div class="c-search-filter__selects">\r\n          <div class="c-search-filter__title">Filter By</div>\r\n          <div class="c-select-wrapper">\r\n            <div class="c-select" id="select-industry" outSideClick (clickOutside)="isExpand=false">\r\n              <div class="c-select__selected-text "(click)="isExpand=!isExpand" style="display:flex;justify-content: space-between;">\r\n                  <div class="c-select__selected-textbox">{{selectedOption}}</div>\r\n                  <i class="icon-chevron-right dropdown_arrow"></i>\r\n              </div>\r\n              <div class="c-select__options-list -addPadding" [class.-active]="isExpand">\r\n                <div class="c-select__options-listwrapper -scroll-cont">\r\n                  <div class="c-select__option" (click)="selectFilter(item)" *ngFor="let item of filterOptions">{{item.name}}</div>\r\n                  \r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="c-search-filter__search">\r\n          <div class="o-search-box-dropdown__wrapper -client-workspace">\r\n            <input\r\n              type="text" [(ngModel)]="searchText" (ngModelChange)="filterDocs()"\r\n              class="o-search-box-dropdown__input c-inner-search-icon"\r\n              placeholder="Type here...." [KeyPressValidator]="validators.accessManagement" [KeyPressType]="\'Restrict\'"\r\n            />\r\n            <i class="icon-search-new o-search-box-dropdown__icon"></i>\r\n            <div class="o-search-box-dropdown__inner-srch-result" style="display:block" *ngIf="searchText?.length" >\r\n              <div class="o-search-close" (click)="searchText=\'\';pagination.currentPage=1;getDocumentList()">\r\n                <i class="icon-add"></i>\r\n              </div>\r\n            \r\n            </div>\r\n          </div>\r\n        </div>\r\n        \x3c!-- Filter by starts ends --\x3e\r\n      </div>\r\n   \r\n    </div>\r\n    <span class="error" *ngIf="searchText?.length>0 && searchText?.length<3">Enter minimum 3 characters</span>\r\n    <div  class="c-results__filter-content">\r\n        <div  class="c-results__soltitle fsize">Showing {{documentList?.length}} results out of 557</div>\x3c!----\x3e\r\n        <div  class="c-results__right respad">\r\n            <a  class="o-btn-secondary cursor-pointer" (click)="openUploadPopup()">Upload</a>\r\n            \x3c!-- <a  permission="" class="o-btn-primary cursor-pointer">Export Template</a>--\x3e\r\n        </div>\r\n    </div>\r\n    <div class="c-table -accm-details">\r\n      <div class="c-table__wrap" *ngIf="documentList?.length">\r\n        <div class="c-table__headrow">\r\n          <div class="c-table__headcol -lg-col">\r\n            \x3c!-- Popup starts from here--\x3e\r\n            <div class="c-popup">\r\n              <div class="c-popup__popupwrapper" [class.-active]="sortColumn == \'FullName\'">\r\n                <div class="c-popup__p-text">\r\n                  <div class="c-popup__p-js" (click)="onSortColumClick(\'FullName\')">\r\n                    Name\r\n\r\n                    <i class="icon-sort-two"></i>\r\n                  </div>\r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n            \x3c!-- Popup ends from here--\x3e\r\n          </div>\r\n          <div class="c-table__headcol -lg-col">\r\n            \x3c!-- Popup starts from here--\x3e\r\n            <div class="c-popup">\r\n              <div class="c-popup__popupwrapper" [class.-active]="sortColumn == \'EmailId\'">\r\n                <div class="c-popup__p-text">\r\n                  <div class="c-popup__p-js" (click)="onSortColumClick(\'EmailId\')">\r\n                    Email ID\r\n\r\n                    <i class="icon-sort-two"></i>\r\n                  </div>\r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n            \x3c!-- Popup ends from here--\x3e\r\n          </div>\r\n          <div class="c-table__headcol -md-col">\r\n            \x3c!-- Popup starts from here--\x3e\r\n            <div class="c-popup">\r\n              <div class="c-popup__popupwrapper">\r\n                <div class="c-popup__p-text">\r\n                  <div class="c-popup__p-js no-pointer">\r\n                    File Type\r\n\r\n                    <i class="icon-sort-two"></i>\r\n                  </div>\r\n                </div>\r\n               \r\n              </div>\r\n            </div>\r\n            \x3c!-- Popup ends from here--\x3e\r\n          </div>\r\n          <div class="c-table__headcol -md-col">\r\n            \x3c!-- Popup starts from here--\x3e\r\n            <div class="c-popup">\r\n              <div class="c-popup__popupwrapper" [class.-active]="sortColumn == \'ModifiedOn\'">\r\n                <div class="c-popup__p-text">\r\n                  <div class="c-popup__p-js" (click)="onSortColumClick(\'ModifiedOn\')">\r\n                    Modified On\r\n\r\n                    <i class="icon-sort-two"></i>\r\n                  </div>\r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n            \x3c!-- Popup ends from here--\x3e\r\n          </div>\r\n          <div class="c-table__headcol -ac-col">\r\n            <span class="c-table__txt"></span>\r\n          </div>\r\n        </div>\r\n        <div class="c-table__row" *ngFor="let doc of documentList">\r\n          <div class="c-table__col -lg-col">\r\n            <span class="c-table__txt" title="{{doc.fileName}}">{{doc.fileName}}</span>\r\n          </div>\r\n          <div class="c-table__col -lg-col">\r\n            <span class="c-table__txt" title="{{doc.emailId}}">{{doc.emailId}}</span>\r\n          </div>\r\n          <div class="c-table__col -md-col">\r\n            <span class="c-table__txt"  title="{{doc.fileType}}">{{doc.fileType}}</span>\r\n          </div>\r\n          <div class="c-table__col -md-col">\r\n            <span class="c-table__txt" *ngIf="doc.modifiedOn">{{doc.modifiedOn|date:\'dd-MM-yyyy\'}}</span>\r\n            <span class="c-table__txt" *ngIf="!doc.modifiedOn">-</span>\r\n          </div>\r\n          <div class="c-table__col -ac-col">\r\n            <span class="c-table__txt"></span>\r\n          </div>\r\n        </div>\r\n     \r\n      </div>\r\n      <div class="c-table__wrap" *ngIf="documentList?.length==0">\r\n        <div class="center_align">No result(s) found</div>\r\n\r\n        </div>\r\n\r\n      <div class="c-table__action -rpadding" *ngIf="documentList?.length">\r\n        <div class="c-table__headrow">\r\n          <div class="c-table__headcol -action-col">Action</div>\r\n        </div>\r\n        <div class="c-table__row -action-row" *ngFor="let doc of documentList">\r\n          <div class="c-action-btns">\r\n            <div class="c-action-btns__item">\r\n              <i class="c-action-btns__icon icon-delete"(mouseover)="tooltipToggle(doc.fileName,\'show\')" (mouseout)="tooltipToggle(doc.fileName,\'hide\')" \r\n                 (click)="onDeleteDoc(doc, $event)"></i>\r\n              <div class="c-action-btns__tooltip -delete" [id]="doc.fileName">Delete</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n       \r\n      </div>\r\n    </div>\r\n    \x3c!-- pagination starts --\x3e\r\n    <div class="c-pagination" *ngIf="pagination.totalPages > 1">\r\n      <div class="c-pagination__btn-wrap">\r\n       \r\n        <div class="c-pagination__left" [class.-disabled]="!pagination.enablePrevious" (click)="goToPage(\'previous\')">\r\n          <a ><i class="icon-chevron-right left_arrow arrow cursor-pointer" [class.-disabled]="!pagination.enablePrevious"></i></a>\r\n        </div>\r\n        <div class="c-pagination__paginationbtn">\r\n          <div class="c-pagination__firstpage">\r\n            <input\r\n              type="text"\r\n              class="o-input-custom"\r\n              placeholder=""\r\n              [KeyPressValidator]="validators.number"\r\n              [KeyPressType]="\'Restrict\'"\r\n              [(ngModel)]="pagination.currentPage"\r\n              (keyup.enter)="checkPagination();getDocumentList(false);"\r\n              (focusout)="checkPagination();getDocumentList(false);"\r\n            />\r\n          </div>\r\n          <div class="c-pagination__nextpage">Of {{pagination.totalPages}}</div>\r\n        </div>\r\n        <div class="c-pagination__right" [class.-disabled]="!pagination.enableNext" (click)="goToPage(\'next\')">\r\n          <a ><i class="icon-chevron-right arrow cursor-pointer" [class.-disabled]="!pagination.enableNext"></i></a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \x3c!-- pagination ends --\x3e\r\n  </div>\r\n</div>\r\n</div>\r\n</div>\r\n',styles:[b()]})],O);var B=s(46717),z=s(56223),K=s(71283);const G=[{path:"",canActivate:[s(80789).k],component:O,canDeactivate:[K.u]}];let M=class{};M=function(r,e,t,i){var o,a=arguments.length,n=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,e,t,i);else for(var l=r.length-1;l>=0;l--)(o=r[l])&&(n=(a<3?o(n):a>3?o(e,t,n):o(e,t))||n);return a>3&&n&&Object.defineProperty(e,t,n),n}([(0,p.LVF)({imports:[d.Bz.forChild(G)],exports:[d.Bz]})],M);let F=class{};F=function(r,e,t,i){var o,a=arguments.length,n=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,e,t,i);else for(var l=r.length-1;l>=0;l--)(o=r[l])&&(n=(a<3?o(n):a>3?o(e,t,n):o(e,t))||n);return a>3&&n&&Object.defineProperty(e,t,n),n}([(0,p.LVF)({declarations:[O,D],imports:[u.ez,B.m,z.u5,M]})],F)},71283:(f,P,s)=>{"use strict";s.d(P,{u:()=>c});var u,p=s(65879);let c=((u=class{constructor(){this.lock=!1}canDeactivate(d,h,m,g){return!d.unMount||d.unMount(g)}}).ctorParameters=()=>[],u);c=function(b,d,h,m){var x,g=arguments.length,v=g<3?d:null===m?m=Object.getOwnPropertyDescriptor(d,h):m;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)v=Reflect.decorate(b,d,h,m);else for(var y=b.length-1;y>=0;y--)(x=b[y])&&(v=(g<3?x(v):g>3?x(d,h,v):x(d,h))||v);return g>3&&v&&Object.defineProperty(d,h,v),v}([(0,p.GSi)({providedIn:"root"})],c)},71758:(f,P,s)=>{var p=s(34969),u=s(71451),_=s(48506),c=u(p);c.i(_),c.push([f.id,".c-templates-details__search-wrap{\n    grid-template-columns: unset;\n}",""]),f.exports=c.toString()},96451:(f,P,s)=>{var p=s(34969),u=s(71451),_=s(48506),c=u(p);c.i(_),c.push([f.id,".icon-add:before{\n    transform:rotate(45deg);\n    color:blue;\n}\n\n.c-modal__close-button:before{\n    content:unset;\n}\n.c-modal__close-button{\n    font-size:16px;\n    right:16px;\n}\n\n.icon-copy:before{\n    font-size:50px;\n    color:#004dff;\n}",""]),f.exports=c.toString()}}]);